# Copyright 2025 Open Source Robotics Foundation, Inc.
#
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.

# Imports

load("@rosidl_cmake//:rules.bzl", "ros_interface")

package(default_visibility = ["//visibility:public"])

# IDL pipeline

ros_interface(
    name = "KeyedString",
    src = "KeyedString.idl",
)

ros_interface(
    name = "KeyedLong",
    src = "KeyedLong.idl",
)

ros_interface(
    name = "NonKeyedWithNestedKey",
    src = "NonKeyedWithNestedKey.idl",
    deps = [
        ":KeyedString"
    ]
)

ros_interface(
    name = "ComplexNestedKey",
    src = "ComplexNestedKey.idl",
    deps = [
        ":NonKeyedWithNestedKey"
    ]
)

# Normal pipeline

[
    ros_interface(
        name = msg,
        src = "@test_interface_files//msg:{}.msg".format(msg),
    )
    for msg in [
        "BasicTypes",
        "Constants",
        "Defaults",
        "Empty",
        "Strings",
        "WStrings",
    ]
]

[
    ros_interface(
        name = msg,
        src = "@test_interface_files//msg:{}.msg".format(msg),
        deps = [
            ":BasicTypes",
            ":Constants",
            ":Defaults",
        ],
    )
    for msg in [
        "Arrays",
        "BoundedPlainSequences",
        "BoundedSequences",
        "UnboundedSequences",
    ]
]

ros_interface(
    name = "Nested",
    src = "@test_interface_files//msg:Nested.msg",
    deps = [
        ":BasicTypes",
    ],
)

ros_interface(
    name = "MultiNested",
    src = "@test_interface_files//msg:MultiNested.msg",
    deps = [
        ":Arrays",
        ":BoundedSequences",
        ":UnboundedSequences",
    ],
)

ros_interface(
    name = "Builtins",
    src = "Builtins.msg",
    deps = [
        "@builtin_interfaces//msg:Duration",
        "@builtin_interfaces//msg:Time",
    ],
)
